<!doctype html>
<html lang="cs" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Kucha≈ô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Outfit', sans-serif;
    }
    .gradient-bg {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .ingredient-tag {
      animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .recipe-card {
      animation: fadeIn 0.5s ease-out forwards;
    }
    .loading-dot {
      animation: bounce 1.4s infinite ease-in-out both;
    }
    .loading-dot:nth-child(1) { animation-delay: -0.32s; }
    .loading-dot:nth-child(2) { animation-delay: -0.16s; }
    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-bg text-white overflow-auto">
  <div class="min-h-full w-full px-4 py-8 md:py-12">
   <div class="max-w-2xl mx-auto"><!-- Header -->
    <header class="text-center mb-8">
     <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-400 to-red-500 mb-4 shadow-lg shadow-orange-500/30"><span class="text-3xl">üë®‚Äçüç≥</span>
     </div>
     <h1 id="app-title" class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-orange-300 via-amber-200 to-yellow-300 bg-clip-text text-transparent">AI Kucha≈ô</h1>
     <p id="subtitle" class="text-gray-400 mt-2">Zadej ingredience a najdi recept</p>
    </header><!-- Input Section -->
    <div class="glass-card rounded-2xl p-6 mb-6"><label class="block text-sm font-medium text-gray-300 mb-3"> Co m√°≈° v lednici? </label>
     <div class="flex gap-3"><input type="text" id="ingredient-input" placeholder="nap≈ô. vejce, s√Ωr, rajƒçata..." class="flex-1 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400/50 transition-all"> <button id="add-btn" class="px-4 py-3 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl transition-all" title="P≈ôidat ingredienci">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
       </svg></button>
     </div><!-- Ingredient Tags -->
     <div id="ingredients-list" class="flex flex-wrap gap-2 mt-4 min-h-[32px]"><!-- Tags will be added here -->
     </div><!-- Search Button --> <button id="search-btn" class="w-full mt-4 py-3 px-6 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-xl font-semibold transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-orange-500/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none" disabled> <span id="button-text">Naj√≠t recepty</span> </button>
    </div><!-- Loading State -->
    <div id="loading" class="hidden glass-card rounded-2xl p-8 text-center">
     <div class="flex justify-center gap-2 mb-4">
      <div class="w-3 h-3 rounded-full bg-orange-400 loading-dot"></div>
      <div class="w-3 h-3 rounded-full bg-orange-400 loading-dot"></div>
      <div class="w-3 h-3 rounded-full bg-orange-400 loading-dot"></div>
     </div>
     <p class="text-gray-400">Hled√°m recepty pro tebe...</p>
    </div><!-- Results Section -->
    <div id="results" class="space-y-4"><!-- Recipe cards will be added here -->
    </div><!-- Empty State -->
    <div id="empty-state" class="hidden glass-card rounded-2xl p-8 text-center"><span class="text-5xl mb-4 block">üç≥</span>
     <p class="text-gray-400">P≈ôidej ingredience a najdi inspiraci na va≈ôen√≠!</p>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: 'AI Kucha≈ô',
      subtitle: 'Zadej ingredience a najdi recept',
      input_placeholder: 'nap≈ô. vejce, s√Ωr, rajƒçata...',
      button_text: 'Naj√≠t recepty',
      primary_color: '#f97316',
      background_color: '#1a1a2e',
      text_color: '#ffffff',
      surface_color: 'rgba(255, 255, 255, 0.05)',
      accent_color: '#fb923c',
      font_family: 'Outfit',
      font_size: 16
    };

    let ingredients = [];

    // Recipe database
    const recipeDatabase = [
      {
        name: "M√≠chan√° vaj√≠ƒçka se s√Ωrem",
        ingredients: ["vejce", "s√Ωr", "m√°slo", "s≈Øl", "pep≈ô"],
        time: "10 min",
        difficulty: "Snadn√©",
        emoji: "üç≥",
        steps: [
          "Roz≈°lehej vejce v misce se ≈°petkou soli a pep≈ôe",
          "Rozeh≈ôej m√°slo na p√°nvi na st≈ôedn√≠ teplotu",
          "Vlij vejce a pomalu m√≠chej",
          "Kdy≈æ jsou skoro hotov√°, p≈ôidej nastrouhan√Ω s√Ωr",
          "Ihned serv√≠ruj"
        ]
      },
      {
        name: "Rajƒçatov√° omeleta",
        ingredients: ["vejce", "rajƒçata", "cibule", "s≈Øl", "olej"],
        time: "15 min",
        difficulty: "Snadn√©",
        emoji: "ü•ö",
        steps: [
          "Nakr√°jej rajƒçata a cibuli na kostky",
          "Osma≈æ cibuli na oleji dozlatova",
          "P≈ôidej rajƒçata a dusij 2 minuty",
          "Roz≈°lehej vejce a vlij na p√°nev",
          "Nech tuhnout a p≈ôelo≈æ na p≈Øl"
        ]
      },
      {
        name: "S√Ωrov√© toasty",
        ingredients: ["chleba", "s√Ωr", "m√°slo", "≈°unka"],
        time: "8 min",
        difficulty: "Snadn√©",
        emoji: "ü•™",
        steps: [
          "Nama≈æ chleba m√°slem z obou stran",
          "Polo≈æ s√Ωr a ≈°unku mezi dva pl√°tky",
          "Op√©kej na p√°nvi nebo v toastovaƒçi",
          "Op√©kej z obou stran dozlatova",
          "Serv√≠ruj tepl√©"
        ]
      },
      {
        name: "Tƒõstoviny s rajƒçatovou om√°ƒçkou",
        ingredients: ["tƒõstoviny", "rajƒçata", "ƒçesnek", "cibule", "olivov√Ω olej", "bazalka"],
        time: "25 min",
        difficulty: "St≈ôedn√≠",
        emoji: "üçù",
        steps: [
          "Uva≈ô tƒõstoviny al dente podle n√°vodu",
          "Na oleji osma≈æ nakr√°jenou cibuli a ƒçesnek",
          "P≈ôidej nakr√°jen√° rajƒçata a dusij 15 minut",
          "Ochu≈• sol√≠, pep≈ôem a bazalkou",
          "Sm√≠chej s tƒõstovinami a serv√≠ruj"
        ]
      },
      {
        name: "Bramborov√° ka≈°e",
        ingredients: ["brambory", "m√°slo", "ml√©ko", "s≈Øl"],
        time: "30 min",
        difficulty: "Snadn√©",
        emoji: "ü•î",
        steps: [
          "Oloupej a nakr√°jej brambory na kousky",
          "Va≈ô v osolen√© vodƒõ do mƒõkka (20 min)",
          "Scej vodu a p≈ôidej m√°slo",
          "Rozmaƒçkej a postupnƒõ p≈ôil√©vej tepl√© ml√©ko",
          "Dochut sol√≠ a serv√≠ruj"
        ]
      },
      {
        name: "Zeleninov√° pol√©vka",
        ingredients: ["mrkev", "celer", "brambory", "cibule", "petr≈æel"],
        time: "40 min",
        difficulty: "Snadn√©",
        emoji: "ü•£",
        steps: [
          "Nakr√°jej v≈°echnu zeleninu na kostky",
          "Osma≈æ cibuli na m√°sle",
          "P≈ôidej ostatn√≠ zeleninu a zalij vodou",
          "Va≈ô 30 minut do mƒõkka",
          "Ochu≈• sol√≠, pep≈ôem a petr≈æelkou"
        ]
      },
      {
        name: "Sma≈æen√Ω r√Ω≈æov√Ω pokrm",
        ingredients: ["r√Ω≈æe", "vejce", "mrkev", "hr√°≈°ek", "s√≥jov√° om√°ƒçka"],
        time: "20 min",
        difficulty: "St≈ôedn√≠",
        emoji: "üçö",
        steps: [
          "Pou≈æij studenou uva≈ôenou r√Ω≈æi",
          "Roze≈°lehej vejce a usma≈æ na p√°nvi",
          "P≈ôidej nakr√°jenou mrkev a hr√°≈°ek",
          "Vm√≠chej r√Ω≈æi a sma≈æ na vysok√©m ohni",
          "Oko≈ôe≈à s√≥jovou om√°ƒçkou"
        ]
      },
      {
        name: "Ovocn√Ω sal√°t",
        ingredients: ["jablko", "ban√°n", "pomeranƒç", "med", "jogurt"],
        time: "10 min",
        difficulty: "Snadn√©",
        emoji: "ü•ó",
        steps: [
          "Nakr√°jej jablko na kostky",
          "Oloupej a nakr√°jej ban√°n a pomeranƒç",
          "Sm√≠chej ovoce v m√≠se",
          "P≈ôidej l≈æ√≠ci medu a jogurt",
          "Prom√≠chej a serv√≠ruj"
        ]
      },
      {
        name: "Palaƒçinky",
        ingredients: ["mouka", "vejce", "ml√©ko", "cukr", "s≈Øl"],
        time: "25 min",
        difficulty: "St≈ôedn√≠",
        emoji: "ü•û",
        steps: [
          "Sm√≠chej mouku, vejce, ml√©ko, cukr a s≈Øl",
          "Roz≈°lehej hladk√© tƒõsto",
          "Rozeh≈ôej p√°nev s trochou oleje",
          "Lij tenkou vrstvu tƒõsta a peƒç z obou stran",
          "Serv√≠ruj s marmel√°dou nebo ƒçokol√°dou"
        ]
      },
      {
        name: "Ku≈ôec√≠ steak",
        ingredients: ["ku≈ôec√≠ prsa", "ƒçesnek", "citron", "olivov√Ω olej", "rozmar√Ωn"],
        time: "25 min",
        difficulty: "St≈ôedn√≠",
        emoji: "üçó",
        steps: [
          "Naklepej ku≈ôec√≠ prsa",
          "Marinuj v oleji, ƒçesneku a citronov√© ≈°≈•√°vƒõ",
          "Nech odpoƒçinout 15 minut",
          "Griluj nebo sma≈æ 6-7 minut z ka≈æd√© strany",
          "Posyp rozmar√Ωnem a serv√≠ruj"
        ]
      },
      {
        name: "ƒåesnekov√Ω chl√©b",
        ingredients: ["chleba", "ƒçesnek", "m√°slo", "petr≈æel"],
        time: "15 min",
        difficulty: "Snadn√©",
        emoji: "üçû",
        steps: [
          "Sm√≠chej zmƒõkl√© m√°slo s prolisovan√Ωm ƒçesnekem",
          "P≈ôidej nasekanou petr≈æel",
          "Nakr√°jej bagetu nebo chleba",
          "Pot≈ôi smƒõs√≠ a zap√©kej v troubƒõ 10 minut",
          "Serv√≠ruj tepl√©"
        ]
      },
      {
        name: "Okurkov√Ω sal√°t",
        ingredients: ["okurka", "jogurt", "ƒçesnek", "kopr", "s≈Øl"],
        time: "10 min",
        difficulty: "Snadn√©",
        emoji: "ü•í",
        steps: [
          "Nakr√°jej okurku na tenk√© pl√°tky",
          "Osol a nech 5 minut odst√°t",
          "Sm√≠chej jogurt s prolisovan√Ωm ƒçesnekem",
          "P≈ôidej okurku a nasekej kopr",
          "Prom√≠chej a serv√≠ruj vychlazen√©"
        ]
      }
    ];

    // Find matching recipes
    function findRecipes(userIngredients) {
      const normalizedUserIngredients = userIngredients.map(i => 
        i.toLowerCase().trim()
          .replace(/√°/g, 'a').replace(/√©/g, 'e').replace(/√≠/g, 'i')
          .replace(/√≥/g, 'o').replace(/√∫/g, 'u').replace(/√Ω/g, 'y')
          .replace(/ƒç/g, 'c').replace(/≈ô/g, 'r').replace(/≈°/g, 's')
          .replace(/≈æ/g, 'z').replace(/ƒõ/g, 'e').replace(/≈Ø/g, 'u')
      );

      const results = recipeDatabase.map(recipe => {
        const normalizedRecipeIngredients = recipe.ingredients.map(i =>
          i.toLowerCase()
            .replace(/√°/g, 'a').replace(/√©/g, 'e').replace(/√≠/g, 'i')
            .replace(/√≥/g, 'o').replace(/√∫/g, 'u').replace(/√Ω/g, 'y')
            .replace(/ƒç/g, 'c').replace(/≈ô/g, 'r').replace(/≈°/g, 's')
            .replace(/≈æ/g, 'z').replace(/ƒõ/g, 'e').replace(/≈Ø/g, 'u')
        );

        let matchCount = 0;
        normalizedUserIngredients.forEach(userIng => {
          if (normalizedRecipeIngredients.some(recipeIng => 
            recipeIng.includes(userIng) || userIng.includes(recipeIng)
          )) {
            matchCount++;
          }
        });

        const matchPercentage = Math.round((matchCount / recipe.ingredients.length) * 100);

        return {
          ...recipe,
          matchCount,
          matchPercentage,
          missingIngredients: recipe.ingredients.filter(ri => {
            const normalizedRi = ri.toLowerCase()
              .replace(/√°/g, 'a').replace(/√©/g, 'e').replace(/√≠/g, 'i')
              .replace(/√≥/g, 'o').replace(/√∫/g, 'u').replace(/√Ω/g, 'y')
              .replace(/ƒç/g, 'c').replace(/≈ô/g, 'r').replace(/≈°/g, 's')
              .replace(/≈æ/g, 'z').replace(/ƒõ/g, 'e').replace(/≈Ø/g, 'u');
            return !normalizedUserIngredients.some(ui => 
              normalizedRi.includes(ui) || ui.includes(normalizedRi)
            );
          })
        };
      });

      return results
        .filter(r => r.matchCount > 0)
        .sort((a, b) => b.matchPercentage - a.matchPercentage)
        .slice(0, 5);
    }

    // Render ingredient tags
    function renderIngredients() {
      const container = document.getElementById('ingredients-list');
      container.innerHTML = ingredients.map((ing, index) => `
        <span class="ingredient-tag inline-flex items-center gap-1 px-3 py-1 bg-orange-500/20 border border-orange-500/30 rounded-full text-sm text-orange-200">
          ${ing}
          <button onclick="removeIngredient(${index})" class="hover:text-white transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </span>
      `).join('');

      document.getElementById('search-btn').disabled = ingredients.length === 0;
    }

    // Add ingredient
    function addIngredient() {
      const input = document.getElementById('ingredient-input');
      const value = input.value.trim();
      
      if (value && !ingredients.includes(value)) {
        ingredients.push(value);
        renderIngredients();
        input.value = '';
      }
      input.focus();
    }

    // Remove ingredient
    window.removeIngredient = function(index) {
      ingredients.splice(index, 1);
      renderIngredients();
    };

    // Render recipe card
    function renderRecipeCard(recipe, index) {
      const matchColor = recipe.matchPercentage >= 70 ? 'text-green-400' : 
                         recipe.matchPercentage >= 40 ? 'text-yellow-400' : 'text-orange-400';
      
      return `
        <div class="recipe-card glass-card rounded-2xl p-6" style="animation-delay: ${index * 0.1}s">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-3">
              <span class="text-4xl">${recipe.emoji}</span>
              <div>
                <h3 class="font-semibold text-lg">${recipe.name}</h3>
                <div class="flex items-center gap-3 text-sm text-gray-400 mt-1">
                  <span>‚è± ${recipe.time}</span>
                  <span>üìä ${recipe.difficulty}</span>
                </div>
              </div>
            </div>
            <div class="text-right">
              <span class="${matchColor} font-bold text-lg">${recipe.matchPercentage}%</span>
              <p class="text-xs text-gray-500">shoda</p>
            </div>
          </div>
          
          ${recipe.missingIngredients.length > 0 ? `
            <div class="mb-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-xl">
              <p class="text-xs text-yellow-300 mb-1">Chyb√≠ ti:</p>
              <p class="text-sm text-yellow-200">${recipe.missingIngredients.join(', ')}</p>
            </div>
          ` : `
            <div class="mb-4 p-3 bg-green-500/10 border border-green-500/20 rounded-xl">
              <p class="text-sm text-green-300">‚úì M√°≈° v≈°echny ingredience!</p>
            </div>
          `}
          
          <details class="group">
            <summary class="cursor-pointer text-orange-400 hover:text-orange-300 transition-colors text-sm font-medium flex items-center gap-2">
              <svg class="w-4 h-4 transition-transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
              Zobrazit postup
            </summary>
            <ol class="mt-3 space-y-2 text-sm text-gray-300">
              ${recipe.steps.map((step, i) => `
                <li class="flex gap-3">
                  <span class="flex-shrink-0 w-6 h-6 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center text-xs font-medium">${i + 1}</span>
                  <span>${step}</span>
                </li>
              `).join('')}
            </ol>
          </details>
        </div>
      `;
    }

    // Search recipes
    async function searchRecipes() {
      const loading = document.getElementById('loading');
      const results = document.getElementById('results');
      const emptyState = document.getElementById('empty-state');

      loading.classList.remove('hidden');
      results.innerHTML = '';
      emptyState.classList.add('hidden');

      // Simulate search delay
      await new Promise(resolve => setTimeout(resolve, 1000));

      const recipes = findRecipes(ingredients);
      loading.classList.add('hidden');

      if (recipes.length === 0) {
        emptyState.innerHTML = `
          <span class="text-5xl mb-4 block">üòï</span>
          <p class="text-gray-400">Nena≈°el jsem ≈æ√°dn√© recepty s tƒõmito ingrediencemi.</p>
          <p class="text-gray-500 text-sm mt-2">Zkus p≈ôidat v√≠ce ingredienc√≠.</p>
        `;
        emptyState.classList.remove('hidden');
      } else {
        results.innerHTML = recipes.map((recipe, i) => renderRecipeCard(recipe, i)).join('');
      }
    }

    // Event listeners
    document.getElementById('add-btn').addEventListener('click', addIngredient);
    document.getElementById('ingredient-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        addIngredient();
      }
    });
    document.getElementById('search-btn').addEventListener('click', searchRecipes);

    // Element SDK integration
    async function onConfigChange(config) {
      const title = document.getElementById('app-title');
      const subtitle = document.getElementById('subtitle');
      const input = document.getElementById('ingredient-input');
      const buttonText = document.getElementById('button-text');

      title.textContent = config.app_title || defaultConfig.app_title;
      subtitle.textContent = config.subtitle || defaultConfig.subtitle;
      input.placeholder = config.input_placeholder || defaultConfig.input_placeholder;
      buttonText.textContent = config.button_text || defaultConfig.button_text;

      const fontFamily = config.font_family || defaultConfig.font_family;
      document.body.style.fontFamily = `${fontFamily}, Outfit, sans-serif`;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title],
        ['subtitle', config.subtitle || defaultConfig.subtitle],
        ['input_placeholder', config.input_placeholder || defaultConfig.input_placeholder],
        ['button_text', config.button_text || defaultConfig.button_text]
      ]);
    }

    // Initialize
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    } else {
      onConfigChange(defaultConfig);
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bcec36d424abde7',t:'MTc2ODI0MzAyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>